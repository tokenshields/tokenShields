webpackJsonp([3],{"46GV":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"transfer",data:function(){return{ruleForm:{account:"",amount:"",memo:""},rules:{account:[{required:!0,message:"account",min:1,trigger:"blur"}],amount:[{required:!0,message:"amount",min:1,trigger:"blur"}],memo:[{required:!0,message:"memo",min:1,trigger:"blur"}]}}},mounted:function(){},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.getUserScatter()})},resetForm:function(e){this.$refs[e].resetFields()},getUserScatter:function(){var e=this,t=(new WebSocket("ws://127.0.0.1:50005/socket.io/?EIO=3&transport=websocket"),{blockchain:"eos",protocol:"http",host:"api.eossweden.se",port:80,chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"});this.$ScatterJS.scatter.connect("My App").then(function(r){if(console.log(r),!r)return!1;var o=e.$ScatterJS.scatter,n={accounts:[t]};o.getIdentity(n).then(function(r){var n=o.identity.accounts.find(function(e){return"eos"===e.blockchain&&"active"===e.authority}),a=o.eos(t,e.$Eos,{expireInSeconds:60}),s={authorization:[n.name+"@"+n.authority]};a.contract("tokenshields").then(function(t){t.transfer(n.name,e.ruleForm.account,e.ruleForm.amount+".0000 TSL","转账",s).then(function(t){console.log(t),t.transaction_id&&(e.$message.success("success"),e.ruleForm={}),e.transaction_id=t.transaction_id}).catch(function(t){console.log(JSON.parse(t).error.details[0].message),e.$message({showClose:!0,message:JSON.parse(t).error.details[0].message,type:"error",duration:0})})})}).catch(function(t){console.error(t),e.$message({showClose:!0,message:"permisson not right ! please switch to other key(owner or active)",type:"error",duration:0})})})}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"transfer"},[r("div",{staticClass:"sendBox"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"account",prop:"account"}},[r("el-input",{attrs:{placeholder:"account"},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"amount",prop:"amount"}},[r("el-input",{attrs:{placeholder:"amount"},model:{value:e.ruleForm.amount,callback:function(t){e.$set(e.ruleForm,"amount",t)},expression:"ruleForm.amount"}},[r("i",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("TSL")])])],1),e._v(" "),r("el-form-item",{attrs:{label:"memo",prop:"memo"}},[r("el-input",{attrs:{placeholder:"memo"},model:{value:e.ruleForm.memo,callback:function(t){e.$set(e.ruleForm,"memo",t)},expression:"ruleForm.memo"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("send")])],1)],1)],1)])},staticRenderFns:[]};var a=r("VU/8")(o,n,!1,function(e){r("9+UW")},"data-v-4c5c6a86",null);t.default=a.exports},"9+UW":function(e,t){}});
//# sourceMappingURL=3.cc66c4628dcfb9f5560e.js.map